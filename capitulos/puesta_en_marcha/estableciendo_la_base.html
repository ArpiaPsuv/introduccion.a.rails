<!DOCTYPE HTML>
<html lang="en-US" manifest="../../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Estableciendo la base | Introducción a Rails</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="rubysur">
        <meta name="description" content="Aprende a programar con Ruby">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../../capitulos/puesta_en_marcha/el_primer_formulario.html" />
        
        
        <link rel="prev" href="../../capitulos/puesta_en_marcha/README.html" />
        

        <meta property="og:title" content="Estableciendo la base | Introducción a Rails">
        <meta property="og:site_name" content="Introducción a Rails">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/rubysur">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../../gitbook/style.css">
        


        
    <div class="book" data-github="rubysur/introduccion.a.rails" data-level="5.1" data-basepath="../.." data-revision="1400950094864">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/rubysur/introduccion.a.rails" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/rubysur/introduccion.a.rails/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/rubysur/introduccion.a.rails/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../../" >Introducción a Rails</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/rubysur" target="blank" class="author-link">About the author</a>
        </li>
        

        
        <li>
            <a href="https://github.com/rubysur/introduccion.a.rails/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        <li>
            <a href="https://github.com/rubysur/introduccion.a.rails/edit/master/capitulos/puesta_en_marcha/estableciendo_la_base.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        

        <li data-level="0" data-path="index.html">
            <a href="../../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li class="chapter " data-level="1" data-path="capitulos/antes_de_empezar.html">
                
                <a href="../../capitulos/antes_de_empezar.html">
                    <i class="fa fa-check"></i> <b>1.</b> Antes de empezar
                </a>
                
                
            </li>
        
            <li class="chapter " data-level="2" data-path="capitulos/que_es_rails.html">
                
                <a href="../../capitulos/que_es_rails.html">
                    <i class="fa fa-check"></i> <b>2.</b> ¿Qué es Rails?
                </a>
                
                
            </li>
        
            <li class="chapter " data-level="3" data-path="capitulos/creando_un_nuevo_proyecto/README.html">
                
                <a href="../../capitulos/creando_un_nuevo_proyecto/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Creando un nuevo proyecto
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="capitulos/creando_un_nuevo_proyecto/instalando_rails.html">
                            
                            <a href="../../capitulos/creando_un_nuevo_proyecto/instalando_rails.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Instalando Rails
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="capitulos/creando_un_nuevo_proyecto/creando_la_aplicacion.html">
                            
                            <a href="../../capitulos/creando_un_nuevo_proyecto/creando_la_aplicacion.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Creando la aplicación
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="4" data-path="capitulos/hola_rails/README.html">
                
                <a href="../../capitulos/hola_rails/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Hola, Rails!
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="capitulos/hola_rails/iniciando_el_servidor.html">
                            
                            <a href="../../capitulos/hola_rails/iniciando_el_servidor.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Iniciando el servidor
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="capitulos/hola_rails/hola_mundo.html">
                            
                            <a href="../../capitulos/hola_rails/hola_mundo.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Hola Mundo
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="capitulos/hola_rails/hola_mundo.html">
                            
                            <a href="../../capitulos/hola_rails/hola_mundo.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Estableciendo la página principal
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="5" data-path="capitulos/puesta_en_marcha/README.html">
                
                <a href="../../capitulos/puesta_en_marcha/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Puesta en marcha
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="capitulos/puesta_en_marcha/estableciendo_la_base.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/estableciendo_la_base.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Estableciendo la base
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="capitulos/puesta_en_marcha/el_primer_formulario.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/el_primer_formulario.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> El primer formulario
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="capitulos/puesta_en_marcha/creando_articulos.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/creando_articulos.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Creando artículos
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="capitulos/puesta_en_marcha/creando_el_modelo_post.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/creando_el_modelo_post.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> Creando el modelo Post
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.5" data-path="capitulos/puesta_en_marcha/salvando_datos_en_el_controlador.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/salvando_datos_en_el_controlador.html">
                                <i class="fa fa-check"></i> <b>5.5.</b> Salvando datos en el controlador
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.6" data-path="capitulos/puesta_en_marcha/mostrando_articulos.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/mostrando_articulos.html">
                                <i class="fa fa-check"></i> <b>5.6.</b> Mostrando artículos
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.7" data-path="capitulos/puesta_en_marcha/listando_todos_los_articulos.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/listando_todos_los_articulos.html">
                                <i class="fa fa-check"></i> <b>5.7.</b> Listando todos los artículos
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.8" data-path="capitulos/puesta_en_marcha/agregando_enlaces.html">
                            
                            <a href="../../capitulos/puesta_en_marcha/agregando_enlaces.html">
                                <i class="fa fa-check"></i> <b>5.8.</b> Agregando enlaces
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li class="chapter " data-level="6" data-path="capitulos/que_sigue.html">
                
                <a href="../../capitulos/que_sigue.html">
                    <i class="fa fa-check"></i> <b>6.</b> ¿Qué sigue?
                </a>
                
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 55.55555555555556%;min-width: 50%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../../capitulos/antes_de_empezar.html" title="Antes de empezar" class="chapter done new-chapter" data-progress="1" style="left: 5.555555555555555%;"></a>
    
        <a href="../../capitulos/que_es_rails.html" title="¿Qué es Rails?" class="chapter done new-chapter" data-progress="2" style="left: 11.11111111111111%;"></a>
    
        <a href="../../capitulos/creando_un_nuevo_proyecto/README.html" title="Creando un nuevo proyecto" class="chapter done new-chapter" data-progress="3" style="left: 16.666666666666668%;"></a>
    
        <a href="../../capitulos/creando_un_nuevo_proyecto/instalando_rails.html" title="Instalando Rails" class="chapter done " data-progress="3.1" style="left: 22.22222222222222%;"></a>
    
        <a href="../../capitulos/creando_un_nuevo_proyecto/creando_la_aplicacion.html" title="Creando la aplicación" class="chapter done " data-progress="3.2" style="left: 27.77777777777778%;"></a>
    
        <a href="../../capitulos/hola_rails/README.html" title="Hola, Rails!" class="chapter done new-chapter" data-progress="4" style="left: 33.333333333333336%;"></a>
    
        <a href="../../capitulos/hola_rails/iniciando_el_servidor.html" title="Iniciando el servidor" class="chapter done " data-progress="4.1" style="left: 38.888888888888886%;"></a>
    
        <a href="../../capitulos/hola_rails/hola_mundo.html" title="Estableciendo la página principal" class="chapter done " data-progress="4.3" style="left: 44.44444444444444%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/README.html" title="Puesta en marcha" class="chapter done new-chapter" data-progress="5" style="left: 50%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/estableciendo_la_base.html" title="Estableciendo la base" class="chapter done " data-progress="5.1" style="left: 55.55555555555556%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/el_primer_formulario.html" title="El primer formulario" class="chapter  " data-progress="5.2" style="left: 61.111111111111114%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/creando_articulos.html" title="Creando artículos" class="chapter  " data-progress="5.3" style="left: 66.66666666666667%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/creando_el_modelo_post.html" title="Creando el modelo Post" class="chapter  " data-progress="5.4" style="left: 72.22222222222223%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/salvando_datos_en_el_controlador.html" title="Salvando datos en el controlador" class="chapter  " data-progress="5.5" style="left: 77.77777777777777%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/mostrando_articulos.html" title="Mostrando artículos" class="chapter  " data-progress="5.6" style="left: 83.33333333333333%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/listando_todos_los_articulos.html" title="Listando todos los artículos" class="chapter  " data-progress="5.7" style="left: 88.88888888888889%;"></a>
    
        <a href="../../capitulos/puesta_en_marcha/agregando_enlaces.html" title="Agregando enlaces" class="chapter  " data-progress="5.8" style="left: 94.44444444444444%;"></a>
    
        <a href="../../capitulos/que_sigue.html" title="¿Qué sigue?" class="chapter  new-chapter" data-progress="6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_14">
                    
                        <h1 id="estableciendo-la-base">Estableciendo la base</h1>
<p>La primera cosa que necesitaremos para crear un nuevo post, es crear un espacio para hacer eso
en nuestra aplicación. Un buen lugar podría ser <code>/posts/new</code>. Si tratas de navegar a esa
dirección ahora -- visitando <a href="http://localhost:3000/posts/new" target="_blank">http://localhost:3000/posts/new</a> -- Rails te dará un error de
ruteo:</p>
<p><img src="http://edgeguides.rubyonrails.org/images/getting_started/routing_error_no_route_matches.png" alt="A routing error, no route matches /posts/new"></p>
<p>Esto es porque no en ningún lugar dentro de las rutas para la aplicación -- definidas dentro
de <code>config/routes.rb</code> -- que defina esta ruta. Por defecto, Rails no tiene rutas configuradas,
excepto por la ruta <code>root</code> que definimos anteriormente, es por esto que tú tendrás que definir
tus rutas cuando las necesites.</p>
<p>Para hacer esto, vas a necesitar crear una ruta dentro de el archivo <code>config/routes.rb</code>, en
una nueva línea entre el <code>do</code> y el <code>end</code> del método <code>draw</code>:</p>
<pre><code class="lang-ruby">get <span class="hljs-string">"posts/new"</span>
</code></pre>
<p>Esta ruta es super simple: define una nueva ruta que sólo responderá a peticiones <code>GET</code>, y qye
la ruta se encuentra en <code>posts/new</code>. Pero como sabe a donde ir sin haber usado la opción
<code>:to</code>? Bueno, Rails usa una convención sensible aquí: Rails asumirá que lo que tú quieres
es que esta ruta vaya a la acción <code>new</code> dentro de el controlador <code>posts</code>.</p>
<p>Con esta ruta definidad, tus peticiones ahora se pueden hacer a través de <code>/posts/new</code> en
la aplicación. Navega hacia: <a href="http://localhost:3000/posts/new" target="_blank">http://localhost:3000/posts/new</a>. Verás otro error de ruteo:</p>
<p><img src="http://edgeguides.rubyonrails.org/images/getting_started/routing_error_no_controller.png" alt="Another routing error, uninitialized constant PostsController"></p>
<p>Este error está pasando porque esta ruta necesita un controlador que esté definido. La ruta
está tratando de encontrar el controlador para servir la petición, pero con el controlador
no definido, simplemente no lo puede hacer. La solución para este caso en particular es simple:
crea un controlador llamado <code>PostsController</code>. Puedes hacerlo ejecutando el siguiente comando:</p>
<pre><code class="lang-bash">$ rails g controller posts
</code></pre>
<p>Si abres el nuevo archivo generado <code>app/controllers/posts_controller.rb</code>,
verás un controlador vacío:</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostsController</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ApplicationController</span></span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Un controlador es simplemente una clase que es definida para heredar de <code>ApplicationController</code>.
Dentro de ésta, vas a definir los métodos que se convertirán en acciones para este controlador.
Estas acciones van a ejecutar operaciones <em>CRUD</em> sobre los posts dentro de nuestro sistema.</p>
<p>Si refrescas la dirección <a href="http://localhost:3000/posts/new" target="_blank">http://localhost:3000/posts/new</a> ahora, vas a tener un nuevo error:</p>
<p><img src="http://edgeguides.rubyonrails.org/images/getting_started/unknown_action_new_for_posts.png" alt="Unknown action new for PostsController!"></p>
<p>Este error indica que Rails no puede encontrar la acción <code>new</code> dentro de
<code>PostsController</code> que recién has generado. Esto es porque cuando los controladores
son generados en Rails están vacíos por defecto, a menos que le digas que acciones
quieres durante el proceso de generación.</p>
<p>Para definir manualmente una acción dentro de un controlador, todo lo que necesitas
es definir un nuevo método dentro del controlador. Abre <code>app/controllers/posts_controller.rb</code>
y dentro de la clase <code>PostsController</code>, define el método <code>new</code> así:</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> </span>new
<span class="hljs-keyword">end</span>
</code></pre>
<p>Con el método <code>new</code> definido en <code>PostsController</code>, si tú refrescas
<a href="http://localhost:3000/posts/new" target="_blank">http://localhost:3000/posts/new</a> verás otro error:</p>
<p><img src="http://edgeguides.rubyonrails.org/images/getting_started/template_is_missing_posts_new.png" alt="Template is missing for posts/new"></p>
<p>Estás obteniendo este error ahora porque Rails espera que las acciones planas
como ésta tengan vistas asociadas a ellas para mostrar la información. Con ninguna
vista disponible, Rails mostrará un error.</p>
<p>En la imagen de arriba, la línea de abajo fue eliminada. Vamos a ver como se ve el error completo:</p>
<blockquote>
Missing template posts/new, application/new with {:locale=&gt;[:en], :formats=&gt;[:html], :handlers=&gt;[:erb, :builder, :coffee]}. Searched in: * &quot;/path/to/blog/app/views&quot;
</blockquote>

<p>Eso es casi un montón de texto! Revisemos rápidamente para entender cuál es la función de cada parte.</p>
<p>La primera parte identifica que plantilla está faltando. En este caso, es la plantila <code>posts/new</code>.
Rails primero buscará esta plantilla. Si no la encuentra, luego tratará de cargar la plantilla
llamada <code>application/new</code>. Busca una aquí porque el <code>PostsController</code> hereda de <code>ApplicationController</code>.</p>
<p>La siguiente parte del mensaje contiene un map (<code>hash</code> en inglés). La llave <code>:locale</code> en este map
simplemente indica el lenguaje que debe contener la plantilla solicitada. Por defecto, está configurado
en Inglés -- o &quot;en&quot; --. La siguiente llave, <code>:formats</code> especifica el formato de la plantilla que será
servido en la respuesta. El formato por defecto es <code>:html</code>, es por eso que Rails busca una plantilla
HTML. La llave final, <code>:handlers</code>, nos dice que <em>manejador de plantilla</em> (o <em>template handler</em> en inglés)
puede ser usada para producir nuestra plantilla. <code>:erb</code> es el manejador más usado para plantillas HTML,
<code>:builder</code> es usado para plantillas XML, y <code>:coffee</code> usa CoffeeScript para construir plantillas JavaScript.</p>
<p>La más simple plantilla que funcionaría en nuestro caso sería una localizada en <code>app/views/posts/new.html.erb</code>.
La extensión de este nombre de archivo es importante: la primera extensión define el <em>formato</em> de la plantilla,
y la segunda extensión el <em>manejador de plantilla</em> que será usado. Rails está tratando de encontrar una
plantilla llamada <code>posts/new</code> en <code>app/views</code> para la aplicación. El formato para esta plantilla puede sólo
ser <code>html</code> y el manejador debería ser <code>erb</code>, <code>builder</code> o <code>coffee</code>. Ya que tú quieres crear un nuevo
formulario HTML, tú tendrás que usar el lenguaje <code>ERB</code>. Por lo tanto el archivo debería ser llamado
<code>posts/new.html.erb</code> y necesita ser localizado dentro de la carpeta <code>app/views</code> de la aplicación.</p>
<p>Ahora ve y crea un nuevo archivo en <code>app/views/posts/new.html.erb</code> y escribe el siguiente
contenido en él:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>New Post<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
</code></pre>
<p>Cuando refresques <a href="http://localhost:3000/posts/new" target="_blank">http://localhost:3000/posts/new</a>, verás que la página tiene un título. La ruta,
el controlador, la acción y la vista ahora están funcionando de manera armoniosa! Es hora de crear
el formulario para un nuevo post.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../../capitulos/puesta_en_marcha/README.html" class="navigation navigation-prev " aria-label="Previous page: Puesta en marcha"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../capitulos/puesta_en_marcha/el_primer_formulario.html" class="navigation navigation-next " aria-label="Next page: El primer formulario"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../../gitbook/app.js"></script>
        

    
    <script src="../../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"ga":{"token":"TOKEN"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
